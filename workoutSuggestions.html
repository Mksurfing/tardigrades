<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Kronos AI App</title>
</head>
<body style="margin:0; padding:0; background:#f0f0f0; display:flex; justify-content:center; align-items:center; height:100vh; font-family:sans-serif;">

  <!-- Phone frame -->
  <div style="
    width: 390px;
    height: 844px;
    background: #e76f51;
    border-radius: 40px;
    box-shadow: 0 0 30px rgba(0,0,0,0.2);
    overflow: hidden;
    position: relative;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
  ">

    <!-- Home button in top-right -->
    <button onclick="window.location.href='HomePage.html'" style="
      position: absolute;
      top: 20px;
      right: 20px;
      background-color: #264653;
      color: white;
      border: none;
      padding: 8px 14px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: bold;
      cursor: pointer;
    ">Home</button>

    <!-- Header -->
    <h1 style="color: white; font-size: 24px; font-weight: bold; margin-top: 60px; text-align: center; line-height: 1.4;">
      Use AI to curate your<br>workout for today!
    </h1>

    <!-- Input -->
    <input 
      type="text" 
      id="goalInput"
      placeholder="Describe your goals..." 
      style="
        width: 100%;
        margin-top: 30px;
        padding: 12px 16px;
        font-size: 16px;
        border: none;
        border-radius: 8px;
        background: #ddd;
        box-sizing: border-box;
      "
    />

    <!-- Label -->
    <div style="width: 100%; margin-top: 30px; color: black; font-weight: bold; font-size: 16px;">Kronos:</div>

    <!-- AI Response Box -->
    <div id="responseBox" style="
      width: 100%;
      height: 300px;
      background: white;
      border-radius: 12px;
      margin-top: 10px;
      padding: 16px;
      box-sizing: border-box;
      font-size: 14px;
      overflow-y: auto;
      color: #333;
    ">
      Your workout plan will appear here after you describe your goals.
    </div>

    <!-- Generate Button -->
    <button id="generateBtn" style="
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #264653;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    ">Generate Plan</button>

  </div>

  <script>
    const generateBtn = document.getElementById('generateBtn');
    const goalInput = document.getElementById('goalInput');
    const responseBox = document.getElementById('responseBox');

    generateBtn.addEventListener('click', async () => {
      const goal = goalInput.value.trim();
      if (!goal) {
        responseBox.textContent = "Please enter your fitness goal!";
        return;
      }

      responseBox.textContent = "Generating plan...";

      try {
        const res = await fetch("http://localhost:3000/api/fitness", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ goal })
        });

        const data = await res.json();
        if (data.plan) {
          responseBox.textContent = data.plan;
        } else if (data.error) {
          responseBox.textContent = "Error: " + data.error;
        } else {
          responseBox.textContent = "Unexpected response from server.";
        }
      } catch (err) {
        responseBox.textContent = "Error connecting to server.";
        console.error(err);
      }
    });
  </script>

</body>
</html>